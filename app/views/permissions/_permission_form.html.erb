<!-- new_form is variable of whether form is for new or edit -->
<% cancel_path = new_form ? permissions_path : permission_path(params[:id]) %>

<div class="row">
  <%= label_tag 'permission_name', 'Name', class: 'required eui-required-o' %>
  <br>
  <%= text_field_tag 'permission_name', @permission_name, class: 'half-width', readonly: !new_form %>
</div>
<%= label_tag 'collection_options', 'Collections', class: 'required eui-required-o' %>
<%= select_tag 'collection_options', options_for_select(PermissionsHelper::CollectionsOptions, @collection_options) %>
<%= hidden_field_tag 'collection_selections'  %>
<div id="chooser-widget" style="display: none;"></div>

<!-- not yet implemented -->
<!-- <fieldset id="collections-constraint-values" class="is-hidden is-white">
  <div class="row">
    <label for="collections-constraint-min">Min</label>
    <input type="number" id="collections-constraint-min" class="space-right">
    <label for="collections-constraint-Max">Max</label>
    <input type="number" id="collections-constraint-max">
    <span>(Inclusive)</span>
  </div>
  <div class="row">
    <input type="checkbox" name="undefined-val" id="undefind-val">
    <label for="undefined-val">Include undefined value</label>
  </div>
</fieldset> -->
<hr>

<%= label_tag 'granule_options', 'Granules', class: 'required eui-required-o' %>
<%= select_tag 'granule_options', options_for_select(PermissionsHelper::GranulesOptions, @granule_options) %>

<!-- not yet implemented -->
<!-- <fieldset id="granules-constraint-values" class="is-hidden is-white">
  <div class="row">
    <label for="granules-constraint-min">Min</label>
    <input type="number" id="granules-constraint-min" class="space-right">
    <label for="granules-constraint-Max">Max</label>
    <input type="number" id="granules-constraint-max">
    <span>(Inclusive)</span>
  </div>
  <div class="row">
    <input type="checkbox" name="undefined-val" id="undefined-val">
    <label for="undefined-val">Include undefined value</label>
  </div>
</fieldset> -->

<hr>

<table class="space-top align-c" id="permission-form-groups-table">
  <caption class="required eui-required-o">Group Permissions</caption>
  <thead>
    <tr>
      <th class="align-c half-width"><label for="search_groups_">Search</label></th>
      <th class="align-c half-width"><label for="search_and_order_groups_">Search and Order</label></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td id="search_groups_cell">
        <%= select_tag 'search_groups[]', options_for_select(@groups, @search_groups), multiple: 'multiple', class: 'permission-group required'  %>
      </td>
      <td id="search_and_order_groups_cell">
        <%= select_tag 'search_and_order_groups[]', options_for_select(@groups, @search_and_order_groups), multiple: 'multiple', class: 'permission-group required'  %>
      </td>
    </tr>
  </tbody>
</table>
<div class="row space-top">
  <%= submit_tag 'Save', class: 'eui-btn--blue space-right', id: 'permissions-save-button' %>
  <%= link_to 'Cancel', cancel_path %>
</div>
