<fieldset>
  <h3>Retry Information</h3>
  <div class="row">
    <div class="col-6">
      <label class="eui-required-o">Retry Attempts</label>
      <%= text_field_tag('retry_attempts', @policy.fetch(:retry_attempts, ""), class: 'full-width required') %>
      <p class="form-description">Number of times that ECHO will try to connect to the provider if the transmission fails.</p>
    </div>
    <div class="col-6">
      <label class="eui-required-o">Retry Wait Time</label>
      <%= text_field_tag('retry_attempts', @policy.fetch(:retry_wait_time, ""), class: 'full-width required') %>
      <p class="form-description">Amount of time (in seconds) that ECHO will wait before trying to connect.</p>
    </div>
  </div>
</fieldset>

<fieldset>
  <h3>Order Transactions</h3>
  <div class="row">
    <label class="eui-required-o">Supported Transactions</label>
  </div>
  <div class="row">
    <div class="col-2">
      <label><%= check_box_tag('supported_transactions[quote]', 1, @policy.fetch(:supported_transactions, {}).fetch(:item, []).include?('QUOTE'), class: 'required') %>
      Quote</label>
    </div>
    <div class="col-2">
      <label><%= check_box_tag('supported_transactions[submit]', 1, @policy.fetch(:supported_transactions, {}).fetch(:item, []).include?('SUBMIT'), class: 'required') %>
      Submit</label>
    </div>
    <div class="col-2">
      <label><%= check_box_tag('supported_transactions[cancel]', 1, @policy.fetch(:supported_transactions, {}).fetch(:item, []).include?('CANCEL'), class: 'required') %>
      Cancel</label>
    </div>
  </div>

  <div class="row">
    <label>Status Update Notifications</label>
    <br>
    <label><%= check_box_tag('override_notification_enabled', 1, @policy.fetch(:override_notification_enabled, false), class: 'required') %>
    Always send status updates</label>
  </div>
</fieldset>

<fieldset>
  <h3>Routing Location</h3>
  <div class="row">
    <label class="eui-required-o">End Point</label>
    <%= text_field_tag('properties', @policy.fetch(:end_point, ""), class: 'full-width required') %>
  </div>
  <div class="row">
    <label class="eui-required-o">Type</label>
    <%= select_tag('routing_type', options_for_select([["Order Fullfillment V9", "ORDER_FULFILLMENT_V9"]], @policy.fetch(:routing_type, "")), class: 'full-width required') %>
  </div>
  <div class="row">
    <label>Suspend Ordering Until</label>
    <%= datetime_field_tag('ordering_suspended_until_date', @policy.fetch(:ordering_suspended_until_date, ""), class: 'full-width required') %>
  </div>
</fieldset>

<fieldset>
  <h3>Order Catalog Options</h3>

  <p class="form-description">Select collections for which duplicate catalog items will be allowed.</p>

  <table>
    <thead>
      <tr>
        <th></th>
        <th>Short Name</th>
        <th>Version</th>
        <th>Entry Title</th>
      </tr>
    </thead>
    <tbody>
      <% if @collections.empty? %>
      <tr>
        <td colspan="4">No collections to display for <%= @current_user.provider_id %>.</td>
      </tr>
      <% else %>
      <% @collections.each do |collection| %>
      <tr>
        <td class="align-c"><%= check_box_tag("collections_supporting_duplicate_order_items[#{collection.fetch("meta").fetch("concept-id")}]", 1, @policy.fetch(:collections_supporting_duplicate_order_items, {}).fetch(:item, []).include?(collection.fetch("meta").fetch("concept-id"))) %></td>
        <td><%= collection.fetch("umm", {}).fetch("entry-title", "") %></td>
        <td><%= collection.fetch("umm", {}).fetch("version-id", "") %></td>
        <td><%= collection.fetch("umm", {}).fetch("entry-title", "") %></td>
      </tr>
      <% end %>
      <% end %>
    </tbody>
  </table>

  <div class="row">
    <div class="col-6">
      <label>Maximum Items Per Order</label>
      <%= text_field_tag('max_items_per_order', @policy.fetch(:max_items_per_order, ""), class: 'full-width required') %>
      <p class="form-description">The maximum number of items that a user can have in a single order.This value is the total quantity of items. If left blank, there is no maximum enforced.</p>
    </div>
  </div>
</fieldset>

<fieldset>
  <h3>SSL Policy</h3>
  <div class="row">
    <label>Certificate</label>
    <%= text_area_tag('properties', @policy.fetch(:ssl_policy, {}).fetch(:ssl_certificate, ""), rows: 5, class: 'full-width required') %>
  </div>
  <div class="row">
    <div class="col-8">
      <label><%= check_box_tag('ssl_policy[ssl_enabled]', 1, @policy.fetch(:ssl_policy, {}).fetch(:ssl_enabled, false), class: 'required') %>
      SSL Enabled</label>
    </div>
    <div class="col-4">
      <% unless @policy.fetch(:ssl_policy, {}).empty? %>
      <em class="form-description">Last Updated on <%= @policy.fetch(:ssl_policy, {}).fetch(:ssl_last_update, "") %></em>
      <% end %>
    </div>
  </div>
</fieldset>

<fieldset>
  <h3>Custom Properties</h3>
  <div class="row">
    <%= text_area_tag('properties', @policy.fetch(:properties, ""), rows: 5, class: 'full-width required') %>
  </div>
</fieldset>

<fieldset>
  <div class="row search-form-actions">
    <button type="button" name="full_search" class="eui-btn--blue">Submit</button>
    <a href="#" class="cancel">Cancel</a>
  </div>
</fieldset>