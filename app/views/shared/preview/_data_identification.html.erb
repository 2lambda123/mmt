<div class="preview-collection accordion is-closed">
  <div class="accordion-header">
    <h4>Data Identification Fields:</h4>
    <a href="#" class="float-r">
      <i class="fa fa-angle-down toggle"></i>
      <span class="is-hidden">Toggle Data Identification Fields</span>
    </a>
  </div>
  <div class="accordion-body">
    <ul class="data-identification-preview">
      <% if metadata['DataDates'] %>
        <h5>Data Dates<% if @draft.present? %><%= link_to '<i class="fa fa-edit"></i> <span class="is-hidden">Edit Data Dates</span>'.html_safe, draft_edit_form_path(@draft, 'data_identification', {anchor: 'data-dates'}), {class: 'hash-link'} %><% end %></h5>
        <table>
          <% metadata['DataDates'].each do |data| %>
            <tr>
              <td><%= data["Type"] %></td>
              <td><%= data["Date"] %></td>
            </tr>
          <% end %>
        </table>
      <% end %>

      <h5>Collection Data Type <% if @draft.present? %><%= link_to '<i class="fa fa-edit"></i> <span class="is-hidden">Edit Collection Data Type</span>'.html_safe, draft_edit_form_path(@draft, 'data_identification', {anchor: 'collection-data-type'}), {class: 'hash-link'} %><% end %></h5>
      <%= map_value_onto_display_string(metadata['CollectionDataType'], DraftsHelper::CollectionDataTypeOptions) %>

      <h5>Processing Level <% if @draft.present? %><%= link_to '<i class="fa fa-edit"></i> <span class="is-hidden">Edit Processing Level</span>'.html_safe, draft_edit_form_path(@draft, 'data_identification', {anchor: 'processing-level'}), {class: 'hash-link'} %><% end %></h5>
      <% if metadata['ProcessingLevel'].blank? %>
        <p class="empty-section">This collection's processing level has not been specified.</p>
      <% else %>
        <% processing_level = metadata['ProcessingLevel'] %>
        <p><%= processing_level['Id'] %></p>
        <p><%= processing_level['ProcessingLevelDescription'] %></p>
      <% end %>

      <h5>Collection Progress <% if @draft.present? %><%= link_to '<i class="fa fa-edit"></i> <span class="is-hidden">Edit Collection Progress</span>'.html_safe, draft_edit_form_path(@draft, 'data_identification', {anchor: 'collection-progress'}), {class: 'hash-link'} %><% end %></h5>
      <p><%= map_value_onto_display_string(metadata['CollectionProgress'], DraftsHelper::CollectionProgressOptions) %></p>

      <h5>Quality <% if @draft.present? %><%= link_to '<i class="fa fa-edit"></i> <span class="is-hidden">Edit Quality</span>'.html_safe, draft_edit_form_path(@draft, 'data_identification', {anchor: 'quality'}), {class: 'hash-link'} %><% end %></h5>
      <%= metadata['Quality'] %>

      <h5>Use Constraints <% if @draft.present? %><%= link_to '<i class="fa fa-edit"></i> <span class="is-hidden">Edit Use Constraints</span>'.html_safe, draft_edit_form_path(@draft, 'data_identification', {anchor: 'use-constraints'}), {class: 'hash-link'} %><% end %></h5>
      <%= render partial: 'shared/preview/fields/display_field_line', locals: {
        key_name: 'UseConstraints', hash_for_key: metadata
      } %>

      <h5>
        Access Constraints
        <% if @draft.present? %>
          <%= link_to '<i class="fa fa-edit"></i> <span class="is-hidden">Edit Access Constraints</span>'.html_safe, draft_edit_form_path(@draft, 'data_identification', { anchor: 'access-constraints' }), { class: 'hash-link' } %>
        <% end %>
      </h5>
      <%= render partial: 'shared/preview/preview_type', locals: {
          data: metadata['AccessConstraints'],
          name: 'AccessConstraints',
          type: TypesHelper::AccessConstraintsType
      } %>

      <h5>Metadata Associations <% if @draft.present? %><%= link_to '<i class="fa fa-edit"></i> <span class="is-hidden">Edit Metadata Associations</span>'.html_safe, draft_edit_form_path(@draft, 'data_identification', {anchor: 'metadata-associations'}), {class: 'hash-link'} %><% end %></h5>
      <table>
        <% metadata['MetadataAssociations'].each do |metadata_association| %>
          <tr>
            <td><%= metadata_association["Type"] %></td>
            <td><%= metadata_association["EntryId"] %></td>
            <td><%= metadata_association["Description"] %></td>
          </tr>
        <% end %>
      </table>

      <h5>Publication References <% if @draft.present? %><%= link_to '<i class="fa fa-edit"></i> <span class="is-hidden">Edit Publication References</span>'.html_safe, draft_edit_form_path(@draft, 'data_identification', {anchor: 'publication-reference'}), {class: 'hash-link'} %><% end %></h5>
      <%= render partial: 'shared/preview/preview_type', locals: {
          data: metadata['PublicationReferences'],
          name: 'PublicationReferences',
          type: TypesHelper::PublicationReferencesType
      } %>

    </ul>
  </div>
</div>
