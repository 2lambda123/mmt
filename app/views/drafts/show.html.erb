<main class="internal record">
  <header>
    <div class="content">
      <div class="breadcrumb">
        <ol>
          <li><%= link_to 'Manage Metadata Dashboard', dashboard_path %></li>
          <li><%= link_to @draft.display_entry_title, draft_path(@draft) %></li>
        </ol>
      </div>
      <h2><%= @draft.display_entry_title %></h2>
      <p class="subtitle">Draft Record</p>
    </div>
  </header>
  <div class="row row-content">
    <section class="action">
      <div class="cta">
        <a href="#" alt="Publish Button" class="btn btn-blue">Publish</a>
        <a class="disabled" href="#" alt="Download XML">Download XML</a> |
        <%= link_to 'Delete Draft', @draft, method: :delete, data: { confirm: 'Are you sure you want to delete this record?' } %>
      </div>
      <div class="quality-score disabled">
        <div class="badges">
          <i class="fa fa-star fa-lg"></i>
          <i class="fa fa-star fa-lg"></i>
          <i class="fa fa-star fa-lg"></i>
          <i class="fa fa-star fa-lg"></i>
          <i class="fa fa-star-o fa-lg"></i>
        </div>
        <div class="score-info">
          <p>Quality Score: <strong>20</strong></p>
          <p>Required fields not complete</p>
        </div>
      </div>
    </section>
    <section class="metadata">
      <h3>Metadata Fields</h3>
      <ul>
        <li>
          <div class="status disabled">
            <i class="fa fa-circle-thin"></i>
          </div>
          <div class="meta-info">
            <%= link_to 'Data Identification', draft_edit_form_path(@draft, 'data_identification') %>
            <div class="progress-indicators disabled">
              <i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle icon-grey"></i><i class="fa fa-circle-o icon-grey"></i>
            </div>
          </div>
        </li>
        <li>
          <div class="status disabled">
            <i class="fa fa-circle-thin"></i>
          </div>
          <div class="meta-info">
            <%= link_to 'Descriptive Keywords', draft_edit_form_path(@draft, 'descriptive_keywords') %>
            <div class="progress-indicators disabled">
              <i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle icon-grey"></i><i class="fa fa-circle-o icon-grey"></i>
            </div>
          </div>
        </li>
        <li>
          <div class="status disabled">
            <i class="fa fa-circle-thin"></i>
          </div>
          <div class="meta-info">
            <%= link_to 'Metadata Information', draft_edit_form_path(@draft, 'metadata_information') %>
            <div class="progress-indicators disabled">
              <i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle icon-grey"></i><i class="fa fa-circle-o icon-grey"></i>
            </div>
          </div>
        </li>
        <li>
          <div class="status disabled">
            <i class="fa fa-check-circle"></i>
          </div>
          <div class="meta-info">
            <%= link_to 'Temporal Extent', draft_edit_form_path(@draft, 'temporal_extent') %>
            <div class="progress-indicators disabled">
              <i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle icon-grey"></i><i class="fa fa-circle-o icon-grey"></i>
            </div>
          </div>
        </li>
        <li>
          <div class="status disabled">
            <i class="fa fa-circle-thin"></i>
          </div>
          <div class="meta-info">
            <%= link_to 'Spatial Extent', draft_edit_form_path(@draft, 'spatial_extent') %>
            <div class="progress-indicators disabled">
              <i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle icon-grey"></i><i class="fa fa-circle-o icon-grey"></i>
            </div>
          </div>
        </li>
        <li>
          <div class="status disabled">
            <i class="fa fa-circle-thin"></i>
          </div>
          <div class="meta-info">
            <%= link_to 'Acquisition Information', draft_edit_form_path(@draft, 'acquisition_information') %>
            <div class="progress-indicators disabled">
              <i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle- icon-grey"></i>
            </div>
          </div>
        </li>
        <li>
          <div class="status disabled">
            <i class="fa fa-check-circle"></i>
          </div>
          <div class="meta-info">
            <%= link_to 'Distribution Information', draft_edit_form_path(@draft, 'distribution_information') %>
            <div class="progress-indicators disabled">
              <i class="fa fa-circle icon-grey"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i>
            </div>
          </div>
        </li>
      </ul>
    </section>

    <div class="row content">
      <section class="preview">

        <h3>Preview</h3>
        <!-- <p>
          <input type="checkbox" name="markdown"></input>
          <label for="markdown">Show as markdown</label>
        </p> -->

        <%= render :partial=>'drafts/previews/data_identification', :locals=>{:draft=>@draft.draft} %>
        <%= render :partial=>'drafts/previews/descriptive_keywords', :locals=>{:draft=>@draft.draft} %>
        <%= render :partial=>'drafts/previews/metadata_information', :locals=>{:draft=>@draft.draft} %>
        <%= render :partial=>'drafts/previews/temporal_extent', :locals=>{draft: @draft.draft} %>
        <%= render :partial=>'drafts/previews/spatial_extent', :locals=>{draft: @draft.draft} %>
        <%= render :partial=>'drafts/previews/acquisition_information', :locals=>{:draft=>@draft.draft} %>
        <%= render :partial=>'drafts/previews/distribution_information', :locals=>{:draft=>@draft.draft} %>

      </section>
      <aside class="geographic-coverage">
        <h3>Geographic Coverage</h3>
        <%= image_tag("plate_carree_earth.png", alt:'Map', id:'preview_map') %>

        <caption>Spatial Coordinates</caption>
        <ol class="coordinates" id="coordinates"></ol>

        <h4>Location Keywords</h4>
        <ul>
          <li>Continent > Antartica</li>
          <li>Geographic Region > Polar</li>
        </ul>

        <% preview_temporal_hash = @draft.get_preview_temporal %>

        <h4>Temporal Coverage</h4>
        <ul>

          <% single_date_times = preview_temporal_hash['single_date_times']%>
          <% single_date_times.each do |single_date_time| %>
            <li>Date: <%= single_date_time %></li></br>
          <% end if single_date_times.present? %>

          <% range_date_times = preview_temporal_hash['range_date_times']%>
          <% range_date_times.each do |range_date_time| %>
            <li>Start Date: <%= range_date_time['beginning_date_time']%> </li> <li>Stop Date: <%= range_date_time['ending_date_time']%> </li></br>
          <% end if range_date_times.present? %>

          <% periodic_date_times = preview_temporal_hash['periodic_date_times']%>
          <% periodic_date_times.each do |periodic_date_time| %>
            <li>Start Date: <%= periodic_date_time['start_date']%> </li> <li>Stop Date: <%= periodic_date_time['end_date']%> </li></br>
          <% end if periodic_date_times.present?%>

          <% if single_date_times.blank? && range_date_times.blank? && periodic_date_times.blank? %>
            <li>No Temporal Coverages found</li>
          <% end  %>

        </ul>
      </aside>

    </div>
  </div>

  <script>
    drawSpatialExtent(<%= raw @draft.get_preview_spatial.to_json %>);
  </script>

</main>
