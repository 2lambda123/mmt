<main class="internal record">
  <header>
    <div class="content">
      <div class="breadcrumb">
        <ol>
          <li><%= link_to 'Manage Metadata Dashboard', dashboard_path %></li>
          <li><%= link_to (@draft.title.blank? ? nil : @draft.title) || '<Untitled Collection Record>', draft_path(@draft) %></li>
        </ol>
      </div>
      <h2>
        <%= image_tag('collection.png', alt: 'Sun') %> <%= @draft.title || '<Untitled Collection Record>' %></h2>
      <p class="subtitle">Draft Record</p>
    </div>
  </header>
  <section class="action">
    <div class="cta">
      <a href="#" alt="Publish Button" class="btn btn-blue">Publish</a>
      <a href="#" alt="Download XML">Download XML</a> |
      <a href="#" alt="Delete Draft">Delete Draft</a>
    </div>
    <div class="quality-score">
      <div class="badges">
        <%= image_tag('badge.png', alt: 'Badge') %>
        <%= image_tag('badge.png', alt: 'Badge') %>
        <%= image_tag('badge.png', alt: 'Badge') %>
        <%= image_tag('badge.png', alt: 'Badge') %>
        <%= image_tag('badge.png', alt: 'Badge') %>
      </div>
      <div class="score-info">
        <p>Quality Score = 20</p>
        <p>Required fields not complete</p>
      </div>
    </div>
  </section>
  <section class="metadata">
    <h3>Metadata Fields</h3>
    <ul>
      <li>
        <div class="status">
          <i class="fa fa-circle-thin"></i>
        </div>
        <div class="meta-info">
          <%= link_to 'Data Identification', draft_edit_form_path(@draft, 'data_identification') %>
          <br>
          <i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i>
        </div>
      </li>
      <li>
        <div class="status">
          <i class="fa fa-circle-thin"></i>
        </div>
        <div class="meta-info">
          <%= link_to 'Descriptive Keywords', draft_edit_form_path(@draft, 'descriptive_keywords') %>
          <br>
          <i class="fa fa-circle icon-grey"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i>
        </div>
      </li>
      <li>
        <div class="status">
          <i class="fa fa-circle-thin"></i>
        </div>
        <div class="meta-info">
          <%= link_to 'Metadata Information', draft_edit_form_path(@draft, 'metadata_information') %>
          <br>
          <i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i>
        </div>
      </li>
      <li>
        <div class="status">
          <i class="fa fa-check-circle"></i>
        </div>
        <div class="meta-info">
          <%= link_to 'Temporal Extent', draft_edit_form_path(@draft, 'temporal_extent') %>
          <br>
          <i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i>
        </div>
      </li>
      <li>
        <div class="status">
          <i class="fa fa-circle-thin"></i>
        </div>
        <div class="meta-info">
          <%= link_to 'Spatial Extent', draft_edit_form_path(@draft, 'spatial_extent') %>
          <br>
          <i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle icon-grey"></i><i class="fa fa-circle-o icon-grey"></i>
        </div>
      </li>
      <li>
        <div class="status">
          <i class="fa fa-circle-thin"></i>
        </div>
        <div class="meta-info">
          <%= link_to 'Acquisition Information', draft_edit_form_path(@draft, 'acquisition_information') %>
          <br>
          <i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle- icon-grey"></i>
        </div>
      </li>
      <li>
        <div class="status">
          <i class="fa fa-check-circle"></i>
        </div>
        <div class="meta-info">
          <%= link_to 'Distribution Information', draft_edit_form_path(@draft, 'distribution_information') %>
          <br>
          <i class="fa fa-circle icon-grey"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o icon-grey"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i><i class="fa fa-circle"></i><i class="fa fa-circle-o"></i>
        </div>
      </li>
    </ul>
  </section>
  
  <div class="row content">
    <section class="preview">
      <!--/br>
      <%= @draft.inspect %>
      </br>
      </br>
      <%= @draft_json.inspect %>
      </br>
      </br-->

      <h3>Preview</h3>
      <input type="checkbox" name="markdown"></input>
      <label for="markdown">Show as markdown</label>

      <!-- ========================================= DATA IDENTIFICATION FORM FIELDS ======================================= -->

      <% if !@draft_json['EntryId'].blank? %>
        <h4>Entry ID</h4>
        <p>
          <%= raw(display_field("ID", @draft_json['EntryId']['Id'])) %>
          <%= raw(display_field("Version", @draft_json['EntryId']['Version'])) %>
          <%= raw(display_field("Authority", @draft_json['EntryId']['Authority'])) %>
        </p>
      <% end %>


      <%= raw(display_field_section_with_header('EntryTitle', 'Title')) %>

      <%= raw(display_field_section_with_header('Abstract')) %>

      <%= raw(display_field_section_with_header('Purpose')) %>

      <!-- Data language -->
      <%= raw(display_field_section_with_header('DataLanguage')) %>

      <!-- Data dates [r] -->
        <!-- DataLineage -->
      <% if !@draft_json['DataLineage'].nil? %>
        <h4>Data Lineage</h4>
        <p>
          <% !@draft_json['DataLineage'].each do |r| %>
            <%= raw(display_field('Scope', r['Scope'])) %>
            <%= raw(display_field('Date', r['Date'])) %>
            Date: Number two?? </br>
            <%= raw(display_field('Type', r['Type'])) %>
            <%= raw(display_field('Description', r['Description'])) %>
            <%= raw(display_field('Responsibility', r['Responsibility'])) %>
            <%= raw((r == @draft_json['DataLineage'].last) ? '' : '</br>') %>
          <% end %>
        </p>
      <% end %>

      <!-- Organization [r] -->
        <!-- show orgs -->
      <% if !@draft_json['ResponsibleOrganization'].nil? %>
        <h4>Responsible Organization</h4>
        <p>
          <% !@draft_json['ResponsibleOrganization'].each do |r| %>
            <%= raw(display_field('Role', r['Role'])) %>
            <%= raw(display_field('Party', r['Party'])) %>
            <%= raw((r == @draft_json['ResponsibleOrganization'].last) ? '' : '</br>') %>
          <% end %>
        </p>
      <% end %>

      <!-- Personnel -->
        <!-- responsibility: display form when no people added -->
        <!-- person: shows full form (address, hours, etc.) -->
      <% if !@draft_json['ResponsiblePersonnel'].nil? %>
        <h4>Responsible Personnel</h4>
        <p>
          <% !@draft_json['ResponsiblePersonnel'].each do |r| %>
            <%= raw(display_field('Role', r['Role'])) %>
            <%= raw(display_field('Party', r['Party'])) %>
            <%= raw((r == @draft_json['ResponsiblePersonnel'].last) ? '' : '</br>') %>
          <% end %>
        </p>
      <% end %>

      <!-- Collection Data Type -->
        <!-- Dropdown with ["SCIENCE_QUALITY", "NEAR_REAL_TIME", "OTHER"] -->
      <%= raw(display_field_section_with_header('CollectionDataType')) %>

      <!-- Resource Citation -->
        <!-- CollectionCitation -->
          <!-- Array of ResourceCitationType -->
      <% if !@draft_json['CollectionCitation'].nil? %>
        <h4>Resource Citation/Collection Citation</h4>
        <p>
          <% !@draft_json['CollectionCitation'].each do |r| %>
            <%= raw(display_field('RelatedUrl', r['RelatedUrl'])) %>
            <%= raw(display_field('Title', r['Title'])) %>
            <%= raw(display_field('Creator', r['Creator'])) %>
            <%= raw(display_field('Editor', r['Editor'])) %>
            <%= raw(display_field('SeriesName', r['SeriesName'])) %>
            <%= raw(display_field('ReleaseDate', r['ReleaseDate'])) %>
            <%= raw(display_field('ReleasePlace', r['ReleasePlace'])) %>
            <%= raw(display_field('Publisher', r['Publisher'])) %>
            <%= raw(display_field('IssueIdentification', r['IssueIdentification'])) %>
            <%= raw(display_field('DataPresentationForm', r['DataPresentationForm'])) %>
            <%= raw(display_field('OtherCitationDetails', r['OtherCitationDetails'])) %>
            <%= raw(display_field('*DOI', r['DOI'])) %>
            <%= raw((r == @draft_json['CollectionCitation'].last) ? '' : '</br>') %>
          <% end %>
        </p>
      <% end %>

      <!-- Collection Progress -->
      <%= raw(display_field_section_with_header('CollectionProgress')) %>

      <!-- Quality -->
      <%= raw(display_field_section_with_header('Quality')) %>

      <!-- Use Constraints -->
      <%= raw(display_field_section_with_header('UseConstraints')) %>

      <!-- Access Constraints -->
      <% if !@draft_json['AccessConstraints'].blank? %>
        <h4>Access Constraints</h4>
        <p>
          <%= raw(display_field('Description', @draft_json['AccessConstraints']['Description'])) %>
          <%= raw(display_field('Value', @draft_json['AccessConstraints']['Value'])) %>
        </p>
      <% end %>

      <!-- Metadata Association -->
      <% if !@draft_json['MetadataAssociation'].nil? %>
        <h4>Metadata Association</h4>
        <p>
          <% !@draft_json['MetadataAssociation'].each do |r| %>
            <%= raw(display_field('Type', r['Type'])) %>
            <%= raw(display_field('Description', r['Description'])) %>
            <%= raw(display_field('EntryId', r['EntryId'])) %>
            <%= raw(display_field('ProviderId', r['ProviderId'])) %>
            <%= raw((r == @draft_json['MetadataAssociation'].last) ? '' : '</br>') %>
          <% end %>
        </p>
      <% end %>

      <!-- Publication Reference -->
      <% if !@draft_json['PublicationReference'].nil? %>
        <h4>Publication Reference</h4>
        <p>
          <% !@draft_json['PublicationReference'].each do |r| %>
            <%= raw(display_field('RelatedUrl', r['RelatedUrl'])) %>
            <%= raw(display_field('Title', r['Title'])) %>
            <%= raw(display_field('Publisher', r['Publisher'])) %>
            <%= raw(display_field('*DOI', r['DOI'])) %>
            <%= raw(display_field('Author', r['Author'])) %>
            <%= raw(display_field('PublicationDate', r['PublicationDate'])) %>
            <%= raw(display_field('Series', r['Series'])) %>
            <%= raw(display_field('Edition', r['Edition'])) %>
            <%= raw(display_field('Volume', r['Volume'])) %>
            <%= raw(display_field('Issue', r['Issue'])) %>
            <%= raw(display_field('ReportNumber', r['ReportNumber'])) %>
            <%= raw(display_field('PublicationPlace', r['PublicationPlace'])) %>
            <%= raw(display_field('Pages', r['Pages'])) %>
            <%= raw(display_field('*ISBN', r['ISBN'])) %>
            <%= raw(display_field('OtherReferenceDetails', r['OtherReferenceDetails'])) %>
            <%= raw((r == @draft_json['PublicationReference'].last) ? '' : '</br>') %>
          <% end %>
        </p>
      <% end %>




      <!-- ========================================= descriptive_keywords FORM FIELDS ======================================= -->
      <!-- ========================================= metadata_information FORM FIELDS ======================================= -->
      <!-- ========================================= temporal_extent FORM FIELDS ======================================= -->
      <!-- ========================================= spatial_extent FORM FIELDS ======================================= -->
      <!-- ========================================= acquisition_information FORM FIELDS ======================================= -->
      <!-- ========================================= distribution_information FORM FIELDS ======================================= -->

    </section>
    <aside class="geographic-coverage">
      <h3>Geographic Coverage</h3>
      <img src="http://placehold.it/306x155">
      <caption>Spatial Coordinates</caption>
      <ol class="coordinates">
        <li>N: -62.83</li>
        <li>S: 90.0</li>
        <li>E: 180.0</li>
        <li>W: -180.0</li>
      </ol>
      <h4>Location Keywords</h4>
      <ul>
        <li>Continent > Antartica</li>
        <li>Geographic Region > Polar</li>
      </ul>
      <h4>Temporal Coverage</h4>
      <ul>
        <li>Start Date: <time datetime="1997-09-09"></time>1997-09-09</li>
        <li>Stop Date: <time datetime="1997-10-22">1997-10-22</time></li>
      </ul>
    </aside>
  </div>
</main>
