<!-- Spatial Extent [r] -->
<fieldset class="accordion is-closed" id="spatial-extent">
  <div class="accordion-header">
    <h3 class="icon-required">Spatial Extent</h3>
    <%= mmt_help_icon(
      title: 'Spatial Extent',
      help: 'properties/SpatialExtent'
    ) %>
    <a href="#" class="float-r">
      <i class="fa fa-angle-down toggle"></i>
      <span class="is-invisible">Toggle Spatial Extent</span>
    </a>
  </div>
  <div class="accordion-body">
    <div class="row">
      <div class="col-12">
        <%= render partial: 'drafts/forms/type', locals: {
            type: 'spatial_extent',
            values: draft.draft['SpatialExtent'] || {},
            name_prefix: 'draft_|spatial_extent|_',
            multiple: false,
            options: {} } %>
      </div>
    </div>
  </div>
</fieldset>

<!-- Tiling Identification Systems -->
<fieldset class="accordion is-closed" id="tiling-identification-system">
  <div class="accordion-header">
    <h3>Tiling Identification Systems</h3>
    <%= mmt_help_icon(
      title: 'Tiling Identification Systems',
      help: 'properties/TilingIdentificationSystems'
    ) %>
    <a href="#" class="float-r">
      <i class="fa fa-angle-down toggle"></i>
      <span class="is-invisible">Toggle Tiling Identification Systems</span>
    </a>
  </div>
  <div class="accordion-body">
    <div class="row">
      <div class="col-12">
        <%= render partial: 'drafts/forms/type', locals: {
            type: 'tiling_identification_system',
            values: draft.draft['TilingIdentificationSystems'] || [{}],
            name_prefix: 'draft_|tiling_identification_systems|_',
            multiple: true,
            options: {} } %>
      </div>
    </div>
  </div>
</fieldset>

<!-- Spatial Representation Information -->
<fieldset class="accordion is-closed" id="spatial-representation-information">
  <div class="accordion-header">
    <h3>Spatial Representation Information</h3>
    <%= mmt_help_icon(
      title: 'Spatial Representation Information',
      help: 'properties/SpatialInformation'
    ) %>
    <a href="#" class="float-r">
      <i class="fa fa-angle-down toggle"></i>
      <span class="is-invisible">Toggle Spatial Representation Information</span>
    </a>
  </div>
  <div class="accordion-body">
    <div class="row">
      <div class="col-12">
        <%= mmt_label(
          name: 'spatial_information',
          title: 'Spatial Representation Information',
          prefix: 'draft_'
        ) %>
        <%= mmt_help_icon(
          title: 'Spatial Representation Information',
          help: 'properties/SpatialInformation'
        ) %>
        <%= render partial: 'drafts/forms/type', locals: {
            type: 'spatial_information',
            values: draft.draft['SpatialInformation'] || {},
            name_prefix: 'draft_|spatial_information|_',
            multiple: false,
            options: {} } %>
      </div>
    </div>
  </div>
</fieldset>

<!-- Spatial Keywords -->
<fieldset class="accordion is-closed" id="spatial-keywords">
  <div class="accordion-header">
    <h3>Spatial Keywords</h3>
    <%= mmt_help_icon(
      title: 'Spatial Keywords',
      help: 'properties/SpatialKeywords'
    ) %>
    <a href="#" class="float-r">
      <i class="fa fa-angle-down toggle"></i>
      <span class="is-invisible">Toggle Spatial Keywords</span>
    </a>
  </div>
  <div class="accordion-body">
    <div class="row">
      <div class="col-12">
        <div class="row sub-fields">
          <div class="selected-spatial-keywords spatial-keywords">
            <ul>
              <% spatial_keywords = draft.draft['SpatialKeywords'] || [] %>
              <% spatial_keywords.each do |spatial_keyword| %>
                <li>
                  <%= spatial_keyword %>
                  <a class="remove">
                    <i class="fa fa-times-circle"></i>
                    <span class="is-invisible">Remove <%= spatial_keyword %></span>
                  </a>
                  <%= hidden_field_tag("draft[spatial_keywords][]", spatial_keyword) %>
                </li>
              <% end %>
            </ul>
            <p><%= hidden_field_tag("draft[spatial_keywords][]", "") %></p>
          </div>
          <div class="nested-item-picker">
            <ul class="item-path">
              <li class="list-title"><a href="javascript:void(0);">Spatial Keyword</a></li>
            </ul>
            <div class="item-list-pane">
              <ul>
                <li>
                  <%= text_field_tag 'spatial-keyword-search', nil, name: nil, class: 'typeahead', placeholder: 'Search for keywords...' %>
                </li>
              </ul>
            </div>
          </div>
          <div class="actions">
            <button type="button" class="btn btn-blue add-spatial-keyword"><i class="fa fa-plus-circle"></i> Add Keyword</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</fieldset>

<!-- Setup Spatial Keywords -->
<script type="text/javascript">
  setupSpatialKeywords(<%= raw @spatial_keywords.to_json %>);
</script>
